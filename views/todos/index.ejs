<!DOCTYPE html>
<html lang="en">
  <%- include('partials/header') %>
  <!-- Include the header partial -->
  <body>
    <div class="table-container">
      <% if (messages.success) { %>
      <div class="alert alert-success"><%= messages.success %></div>
      <% } %>
      <h2 class="todo-title">Todo List</h2>
      <div>
        <a class="btn" href="/todos/add-todo">Add todo</a>
      </div>
      <br />
      <table>
        <tr>
          <th>Title</th>
          <th>Description</th>
          <th>Created at</th>
          <th>Updated at</th>
          <th>Action</th>
        </tr>
        <% todos.forEach(todo => { %>
        <tr>
          <td><%= todo.title %></td>
          <td><%= todo.description %></td>
          <td><%= moment(todo.createdAt).format("DD-MM-YYYY, HH:mm:ss") %></td>
          <td><%= moment(todo.updatedAt).format("DD-MM-YYYY, HH:mm:ss") %></td>

          <td>
            <a class="btn" href="/todos/update-todo?id=<%= todo._id%>">Edit</a>
            <a class="btn" href="/todos/delete-todo?id=<%= todo._id%>"
              >Delete</a
            >
          </td>
        </tr>
        <% }) %>
      </table>
    </div>
  </body>
</html>
